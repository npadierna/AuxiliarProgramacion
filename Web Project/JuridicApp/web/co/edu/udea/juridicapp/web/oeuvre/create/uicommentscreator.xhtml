<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >

<ui:composition
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:f="http://java.sun.com/jsf/core"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:p="http://primefaces.org/ui"
    xmlns:c="http://java.sun.com/jsp/jstl/core" >

    <p:panel header="Añadir Comentarios"
             id="adderCommentsPanel" >
        <center>
            <h:panelGrid cellpadding="10" columns="2"
                         id="commentTyperPanelGrid" >
                <h:outputText value="Observaciones o comentarios:" >
                </h:outputText>
                <p:inputTextarea
                    autoResize="false" cols="30"
                    counter="counterComents"
                    counterTemplate="{0} Caracteres Restantes."
                    maxlength="250" rows="5"
                    value="#{creatorOeuvreBean.commentText}" >
                </p:inputTextarea>
            </h:panelGrid>
            <h:outputText id="counterComents" >
            </h:outputText>
        </center>
        <center>
            <p:commandButton
                actionListener="#{creatorOeuvreBean.addComment}"
                icon="ui-icon-circle-plus"
                id="addCommentButton"
                update=":mainForm:adderCommentsPanel"
                value="Añadir Comentario" >
            </p:commandButton>
        </center>

        <p:panel id="addCommentsPanel" >
            <p:spacer height="20px" ></p:spacer>

            <p:dataTable
                emptyMessage="No se han añadido Comentarios."
                id="addCommentsTable"
                value="#{creatorOeuvreBean.comments}"
                var="comment" >

                <p:column>
                    <f:facet name="header" >
                        <h:outputText value="Texto De Comentario" >
                        </h:outputText>
                    </f:facet>
                    <h:outputText
                        value="#{comment.text}" >
                    </h:outputText>
                </p:column>

                <p:column>
                    <f:facet name="header" >
                        <h:outputText value="Fecha / Hora" >
                        </h:outputText>
                    </f:facet>
                    <h:outputText
                        value="#{comment.dateTime}" >
                    </h:outputText>
                </p:column>

                <p:column>
                    <center>
                        <p:commandButton
                            action="#{creatorOeuvreBean.removeComment(comment)}"
                            icon="ui-icon-closethick"
                            id="removeCommentButton"
                            update="addCommentsTable"
                            value="Eliminar" >
                        </p:commandButton>
                    </center>
                </p:column>
            </p:dataTable>
        </p:panel>
    </p:panel>
</ui:composition>