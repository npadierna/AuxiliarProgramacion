<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd" >
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:h="http://java.sun.com/jsf/html" 
      xmlns:p="http://primefaces.org/ui"
      xmlns:f="http://java.sun.com/jsf/core">

    <h:head >
        <title>Jur√≠dicApp</title>
    </h:head>

    <h:body >
        <p:layout fullPage="true"> 
            <p:layoutUnit closable="false" collapsible="false" position="south" 
                          resizable="false" size="50" >   
            </p:layoutUnit> 

            <p:layoutUnit closable="false" collapsible="true" effect="drop" 
                          header="Usuario" position="east" resizable="false" 
                          size="200" >  
                <h:outputText value="Datos del usuario" />  
            </p:layoutUnit>  

            <p:layoutUnit position="center">  

                <h:form id="mainForm" >
                    <center>
                        <p:dataTable draggableColumns="true" id="mainTable" 
                                     paginator="true"
                                     paginatorTemplate="{CurrentPageReport}  {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
                                     rows="10"  rowKey="#{juridical.issue}" rowsPerPageTemplate="10,15,30" 
                                     selection="#{workBean.selectedJuridica}"
                                     selectionMode="single"
                                     style="width: 98%; font-size: 13px;"
                                     value="#{workBean.allJuridical}"
                                     var="juridical" >
                            <f:facet name="header" >
                                Listado de Obras
                            </f:facet>

                            <p:column filterBy="issue" filterMatchMode="exact"
                                      style="font-size: 15px;" >
                                <f:facet id="issue" name="header">  
                                    <h:outputText value="Obra" >
                                    </h:outputText>  
                                </f:facet>  
                                <h:outputText style="font-size: 13px;"
                                              value="#{juridical.issue}" >
                                </h:outputText>
                            </p:column>

                            <p:column sortBy="year"
                                      style="font-size: 15px;" >
                                <f:facet id="year" name="header">  
                                    <h:outputText value="Fecha" >
                                    </h:outputText>  
                                </f:facet>  
                                <h:outputText style="font-size: 13px;"
                                              value="#{juridical.year}" >
                                </h:outputText>
                            </p:column>

                            <p:column sortBy="issue" style="font-size: 15px;" >
                                <f:facet id="type" name="header">  
                                    <h:outputText value="Tipo" >
                                    </h:outputText>  
                                </f:facet> 
                                <h:outputText style="font-size: 13px;"
                                              value="#{juridical.issue}" >
                                </h:outputText>
                            </p:column>

                            <p:column id="seeAuthors"
                                      style="font-size: 15px;" >
                                <f:facet id="authors" name="header">  
                                    <h:outputText value="Autor(es)" >
                                    </h:outputText>  
                                </f:facet> 
                                <p:commandLink id="showAuthors"
                                               oncomplete="PF('authorsListDialogue').show()" >
                                    <center>
                                        <h:outputText title="Ver autores"
                                                      value="Ver autores" >
                                        </h:outputText>
                                    </center>
                                </p:commandLink>
                            </p:column>

                            <p:column style="font-size: 15px;" >
                                <f:facet id="contract" name="header">  
                                    <h:outputText value="Contrato" >
                                    </h:outputText> 
                                </f:facet> 
                            </p:column>

                            <p:column style="font-size: 15px;" >
                                <f:facet id="support" name="header">  
                                    <h:outputText value="Soporte" >
                                    </h:outputText>  
                                </f:facet> 
                            </p:column>

                            <p:column sortBy="isbn"
                                      style="font-size: 15px;" >
                                <f:facet id="isbn" name="header">  
                                    <h:outputText value="ISBN" >
                                    </h:outputText>  
                                </f:facet> 
                                <h:outputText style="font-size: 13px;"
                                              value="#{juridical.isbn}" >
                                </h:outputText>
                            </p:column>

                            <p:column style="font-size: 15px;" >
                                <f:facet id="archivos" name="header">  
                                    <h:outputText value="Archivos" >
                                    </h:outputText> 
                                </f:facet> 
                            </p:column>

                            <p:column style="font-size: 15px;" >
                                <f:facet id="observaciones" name="header">  
                                    <h:outputText value="Observaciones" >
                                    </h:outputText>  
                                </f:facet> 
                            </p:column>

                            <f:facet  id="button" name="footer" >
                                <p:button id="viewButton" value="Ver" 
                                          icon="ui-icon-search" outcome="work">
                                    <f:param name="obra" value="" >
                                    </f:param> 
                                </p:button>
                            </f:facet>

                            <f:facet  id="obras" name="footer" >
                                Total Obras: #{workBean.allJuridical.size()}
                            </f:facet>

                        </p:dataTable>
                    </center>

                    <h:panelGrid columns="2">  
                        <p:panel header="Exportar Todas las Tablas">  
                            <h:commandLink>  
                                <p:graphicImage value="/faces/co/edu/udea/juridicapp/web/util/download_excel.jpg" >
                                </p:graphicImage>  
                                <p:dataExporter type="xls" target="mainTable" 
                                                fileName="obras" >        
                                </p:dataExporter>  
                            </h:commandLink>  

                            <h:commandLink>  
                                <p:graphicImage value="/faces/co/edu/udea/juridicapp/web/util/download_pdf.jpg" >
                                </p:graphicImage>  
                                <p:dataExporter type="pdf" target="mainTable" 
                                                fileName="obras">
                                </p:dataExporter>  
                            </h:commandLink>  
                        </p:panel>  

                        <p:panel header="Exportar Solo esta Tabla">  
                            <h:commandLink>  
                                <p:graphicImage value="/faces/co/edu/udea/juridicapp/web/util/download_excel.jpg" > 
                                </p:graphicImage>  
                                <p:dataExporter type="xls" target="mainTable" 
                                                fileName="obras" pageOnly="true"> 
                                </p:dataExporter>  
                            </h:commandLink>  

                            <h:commandLink>  
                                <p:graphicImage value="/faces/co/edu/udea/juridicapp/web/util/download_pdf.jpg" > 
                                </p:graphicImage>  
                                <p:dataExporter type="pdf" target="mainTable" 
                                                fileName="obras" pageOnly="true">
                                </p:dataExporter>  
                            </h:commandLink>  
                        </p:panel>  
                    </h:panelGrid>  

                    <p:dialog header="Listado de Autores" hideEffect="explode"
                              id="dialog" resizable="false" showEffect="fade"
                              widgetVar="authorsListDialogue" >  

                        <h:panelGrid id="display" columns="2" cellpadding="4" >
                            <h:outputText value="Nombre:" >
                            </h:outputText>  
                            <h:outputText value="Foo" >
                            </h:outputText> 
                        </h:panelGrid>  
                    </p:dialog>
                </h:form>
            </p:layoutUnit>
        </p:layout>
    </h:body>
</html>